{"ast":null,"code":"var _jsxFileName = \"/Users/efecto10/Desktop/Proyectos/Rod Alexanderson/rodan-app/src/context/userProvider.jsx\",\n    _s = $RefreshSig$();\n\nimport { onSnapshot } from \"firebase/firestore\";\nimport { createContext, useState, useEffect } from \"react\";\nimport { getDocRef } from \"../Services/CRUD\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const userContext = /*#__PURE__*/createContext();\n\nconst handleAuthChange = async callback => {\n  const unSuscribe = onAuthStateChanged(auth, callback);\n  return unSuscribe;\n};\n\nexport const UserProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [user, setUser] = useState(); //REVISAR ANTES DE ENVIAR//\n\n  const suscribeToUser = user => onSnapshot(getDocRef(\"users\", user.uid), data => {\n    setUser({ ...user,\n      ...data.data()\n    });\n  });\n\n  useEffect(async () => {\n    let unsuscribeFromUser;\n    const unsuscribe = await handleAuthChange(user => {\n      if (user) {\n        unsuscribeFromUser = suscribeToUser(user);\n      } else {\n        setUser(null);\n        if (unsuscribeFromUser) unsuscribeFromUser();\n      }\n    });\n    return () => {\n      unsuscribe();\n      if (unsuscribeFromUser) unsuscribeFromUser();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(userContext.Provider, {\n    value: user,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UserProvider, \"hT6C72rcbfRUedrDq+TPaFfRI/M=\");\n\n_c = UserProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"sources":["/Users/efecto10/Desktop/Proyectos/Rod Alexanderson/rodan-app/src/context/userProvider.jsx"],"names":["onSnapshot","createContext","useState","useEffect","getDocRef","userContext","handleAuthChange","callback","unSuscribe","onAuthStateChanged","auth","UserProvider","children","user","setUser","suscribeToUser","uid","data","unsuscribeFromUser","unsuscribe"],"mappings":";;;AAAA,SAASA,UAAT,QAA2B,oBAA3B;AACA,SAASC,aAAT,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AAEA,SAASC,SAAT,QAA0B,kBAA1B;;AAEA,OAAO,MAAMC,WAAW,gBAAGJ,aAAa,EAAjC;;AAEP,MAAMK,gBAAgB,GAAG,MAAOC,QAAP,IAAoB;AACzC,QAAMC,UAAU,GAAGC,kBAAkB,CAACC,IAAD,EAAOH,QAAP,CAArC;AACA,SAAOC,UAAP;AACH,CAHD;;AAMA,OAAO,MAAMG,YAAY,GAAG,QAAgB;AAAA;;AAAA,MAAf;AAACC,IAAAA;AAAD,GAAe;AACzC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,EAAhC,CADyC,CAGxC;;AAEA,QAAMa,cAAc,GAAIF,IAAD,IAAUb,UAAU,CAACI,SAAS,CAAC,OAAD,EAAUS,IAAI,CAACG,GAAf,CAAV,EAAgCC,IAAD,IAAU;AAChFH,IAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAU,SAAGI,IAAI,CAACA,IAAL;AAAb,KAAD,CAAP;AACH,GAF0C,CAA3C;;AAKAd,EAAAA,SAAS,CAAC,YAAY;AAClB,QAAIe,kBAAJ;AACA,UAAMC,UAAU,GAAG,MAAMb,gBAAgB,CAAEO,IAAD,IAAQ;AAClD,UAAIA,IAAJ,EAAS;AACLK,QAAAA,kBAAkB,GAAGH,cAAc,CAACF,IAAD,CAAnC;AACH,OAFD,MAEO;AACHC,QAAAA,OAAO,CAAC,IAAD,CAAP;AACA,YAAII,kBAAJ,EAAwBA,kBAAkB;AAC7C;AACJ,KAP4C,CAAzC;AAQJ,WAAO,MAAK;AACRC,MAAAA,UAAU;AACV,UAAID,kBAAJ,EAAwBA,kBAAkB;AAC7C,KAHD;AAIC,GAdQ,EAcN,EAdM,CAAT;AAgBA,sBACI,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEL,IAA7B;AAAA,cACKD;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH,CA/BM;;GAAMD,Y;;KAAAA,Y","sourcesContent":["import { onSnapshot } from \"firebase/firestore\";\nimport { createContext, useState, useEffect } from \"react\";\n\nimport { getDocRef } from \"../Services/CRUD\";\n\nexport const userContext = createContext()\n\nconst handleAuthChange = async (callback) => {\n    const unSuscribe = onAuthStateChanged(auth, callback)\n    return unSuscribe\n}\n\n\nexport const UserProvider = ({children}) => {\n   const [user, setUser] = useState();\n\n    //REVISAR ANTES DE ENVIAR//\n\n    const suscribeToUser = (user) => onSnapshot(getDocRef(\"users\", user.uid), (data) => {\n        setUser({...user, ...data.data()})\n    });\n\n\n    useEffect(async () => {\n        let unsuscribeFromUser;\n        const unsuscribe = await handleAuthChange((user)=>{\n        if (user){\n            unsuscribeFromUser = suscribeToUser(user);\n        } else {\n            setUser(null);\n            if (unsuscribeFromUser) unsuscribeFromUser();\n        }\n    });\n    return ()=> {\n        unsuscribe();\n        if (unsuscribeFromUser) unsuscribeFromUser();\n    };\n    }, []);\n\n    return (\n        <userContext.Provider value={user}>\n            {children}\n        </userContext.Provider>\n    )\n};"]},"metadata":{},"sourceType":"module"}