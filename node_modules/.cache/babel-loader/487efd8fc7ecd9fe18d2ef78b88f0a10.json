{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexa\\\\Desktop\\\\rodan-app\\\\src\\\\context\\\\userProvider.jsx\",\n    _s = $RefreshSig$();\n\nimport { onSnapshot } from \"firebase/firestore\";\nimport { createContext, useState, useEffect } from \"react\";\nimport { handleAuthChange } from \"../Services/authChange\";\nimport { getDocRef } from \"../Services/CRUD\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const userContext = /*#__PURE__*/createContext();\nexport const UserProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [user, setUser] = useState();\n\n  const suscribeToUser = user => onSnapshot(getDocRef(\"users\", user.uid), data => {\n    setUser({ ...user,\n      ...data.data()\n    });\n  });\n\n  useEffect(() => {\n    let unsuscribeFromUser;\n    const unsuscribe = handleAuthChange(async user => {\n      if (user) {\n        unsuscribeFromUser = await suscribeToUser(user);\n      } else {\n        await setUser(null);\n        if (unsuscribeFromUser) unsuscribeFromUser();\n      }\n    });\n    return () => {\n      unsuscribe();\n      if (unsuscribeFromUser) unsuscribeFromUser();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(userContext.Provider, {\n    value: user,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UserProvider, \"hT6C72rcbfRUedrDq+TPaFfRI/M=\");\n\n_c = UserProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"sources":["C:/Users/alexa/Desktop/rodan-app/src/context/userProvider.jsx"],"names":["onSnapshot","createContext","useState","useEffect","handleAuthChange","getDocRef","userContext","UserProvider","children","user","setUser","suscribeToUser","uid","data","unsuscribeFromUser","unsuscribe"],"mappings":";;;AAAA,SAASA,UAAT,QAA2B,oBAA3B;AACA,SAASC,aAAT,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,SAASC,gBAAT,QAAiC,wBAAjC;AACA,SAASC,SAAT,QAA0B,kBAA1B;;AAEA,OAAO,MAAMC,WAAW,gBAAGL,aAAa,EAAjC;AAGP,OAAO,MAAMM,YAAY,GAAG,QAAgB;AAAA;;AAAA,MAAf;AAACC,IAAAA;AAAD,GAAe;AACzC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,EAAhC;;AAEC,QAAMS,cAAc,GAAIF,IAAD,IAAUT,UAAU,CAACK,SAAS,CAAC,OAAD,EAAUI,IAAI,CAACG,GAAf,CAAV,EAAgCC,IAAD,IAAU;AAChFH,IAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAU,SAAGI,IAAI,CAACA,IAAL;AAAb,KAAD,CAAP;AACH,GAF0C,CAA3C;;AAKAV,EAAAA,SAAS,CAAI,MAAM;AACd,QAAIW,kBAAJ;AACC,UAAMC,UAAU,GAAIX,gBAAgB,CAAE,MAAOK,IAAP,IAAc;AACjD,UAAIA,IAAJ,EAAS;AACRK,QAAAA,kBAAkB,GAAG,MAAMH,cAAc,CAACF,IAAD,CAAzC;AACL,OAFI,MAEE;AACJ,cAAOC,OAAO,CAAC,IAAD,CAAd;AACC,YAAII,kBAAJ,EAAwBA,kBAAkB;AAC7C;AACJ,KAPyC,CAApC;AAQN,WAAO,MAAK;AACXC,MAAAA,UAAU;AACP,UAAID,kBAAJ,EAAwBA,kBAAkB;AAC7C,KAHD;AAIC,GAdQ,EAcN,EAdM,CAAT;AAgBA,sBACI,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEL,IAA7B;AAAA,cACKD;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH,CA7BM;;GAAMD,Y;;KAAAA,Y","sourcesContent":["import { onSnapshot } from \"firebase/firestore\";\nimport { createContext, useState, useEffect } from \"react\";\nimport { handleAuthChange } from \"../Services/authChange\";\nimport { getDocRef } from \"../Services/CRUD\";\n\nexport const userContext = createContext()\n\n\nexport const UserProvider = ({children}) => {\n   const [user, setUser] = useState();\n\n    const suscribeToUser = (user) => onSnapshot(getDocRef(\"users\", user.uid), (data) => {\n        setUser({...user, ...data.data()})\n    });\n\n\n    useEffect(   () => {\n         let unsuscribeFromUser;\n          const unsuscribe =  handleAuthChange (async (user)=>{\n             if (user){\n              unsuscribeFromUser = await suscribeToUser(user);\n        } else {\n           await  setUser(null);\n            if (unsuscribeFromUser) unsuscribeFromUser();\n        }\n    });\n    return ()=> {\n     unsuscribe();\n        if (unsuscribeFromUser) unsuscribeFromUser();\n    };\n    }, []);\n\n    return (\n        <userContext.Provider value={user}>\n            {children}\n        </userContext.Provider>\n    )\n};"]},"metadata":{},"sourceType":"module"}