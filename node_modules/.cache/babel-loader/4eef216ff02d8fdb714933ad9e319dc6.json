{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\rodal\\\\Desktop\\\\ibarraHirasako\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\Users\\\\rodal\\\\Desktop\\\\ibarraHirasako\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useEffect,useState,useContext}from\"react\";import{onSnapshot}from\"firebase/firestore\";import{getCollectionRef}from\"../../Services/CRUD\";import TicketCard from\"../../Components/TicketCard\";import FinanceCard from\"../../Components/FinanceCard\";import{userContext}from\"../../context/userProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listaTickets=_useState2[0],setListaTickets=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),fromDate=_useState4[0],setFromDate=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),toDate=_useState6[0],setToDate=_useState6[1];var _useState7=useState(\"shared\"),_useState8=_slicedToArray(_useState7,2),sharedTicket=_useState8[0],setSharedTicket=_useState8[1];// Corregido el nombre de la variable\nvar user=useContext(userContext);useEffect(function(){var unSubscribe=onSnapshot(getCollectionRef(\"tickets\"),function(data){setListaTickets(data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));});return function(){unSubscribe();};},[]);// Obtener los tickets filtrados por los criterios seleccionados\nvar filteredExpenses=listaTickets.filter(function(data){if(sharedTicket===\"personal\"){// Mostrar solo los tickets del usuario actual (filtrar por uid)\nreturn data.type===\"expense\"&&data.category===sharedTicket&&data.uid===user.uid;}else{// Mostrar los tickets basados en el estado compartido y el rango de fechas\nreturn data.type===\"expense\"&&data.category===sharedTicket&&(fromDate&&toDate?data.date>=fromDate&&data.date<=toDate:data.date);}});// THIS PART WILL CHANGE INCOME TICKET AMOUNT ARRAY STRING TO INTERGER\nvar incomeTypeTicketsAmount=[];var incomeTypeTickets=listaTickets.filter(function(data){return data.type==='income'&&data.date>=fromDate&&data.date<=toDate;});var incomeTypeTicketsString=incomeTypeTickets.map(function(data){return data.amount;});incomeTypeTicketsString.forEach(function(str){incomeTypeTicketsAmount.push(Number(str));});var incomeSum=0;for(var i=0;i<incomeTypeTicketsAmount.length;i++){incomeSum+=incomeTypeTicketsAmount[i];}// THIS PART WILL CHANGE INCOME TICKET AMOUNT ARRAY STRING TO INTERGER\nvar expenseTypeTicketsAmount=[];var expenseTypeTickets=listaTickets.filter(function(data){return data.type==='expense'&&data.date>=fromDate&&data.date<=toDate;});var expenseTypeTicketsString=expenseTypeTickets.map(function(data){return data.amount;});expenseTypeTicketsString.forEach(function(str){expenseTypeTicketsAmount.push(Number(str));});var expenseSum=0;for(var _i=0;_i<expenseTypeTicketsAmount.length;_i++){expenseSum+=expenseTypeTicketsAmount[_i];}// THIS WILL GET THE COMISSION AND RESULT\nvar porcentajeComision=0.10;var commission=incomeSum*porcentajeComision;var result=incomeSum-expenseSum-commission;// Obtener la suma total de los gastos y los ingresos\nvar totalExpenses=filteredExpenses.reduce(function(total,ticket){return total+Number(ticket.amount);},0);var totalIncome=listaTickets.filter(function(data){return data.type==='income'&&data.category===sharedTicket&&(fromDate&&toDate?data.date>=fromDate&&data.date<=toDate:data.date);}).reduce(function(total,ticket){return total+Number(ticket.amount);},0);var balance=totalIncome-totalExpenses;var filterReset=function filterReset(){setFromDate(\"\");setToDate(\"\");};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col w-full lg:flex-row justify-evenly mt-0 bg-pink-300\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-xl font-bold lg:text-xl my-auto\",children:\"Filtro por fechas\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full lg:w-3/4  justify-around\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fromDate\",className:\"block text-gray-700 font-bold mb-2 text-2xl\",children:\"Desde\"}),/*#__PURE__*/_jsx(\"input\",{id:\"fromDate\",name:\"fromDate\",type:\"date\",onChange:function onChange(e){return setFromDate(e.target.value);},value:fromDate,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"toDate\",className:\"block text-gray-700 font-bold mb-2 text-2xl\",children:\"Hasta\"}),/*#__PURE__*/_jsx(\"input\",{id:\"toDate\",name:\"toDate\",type:\"date\",onChange:function onChange(e){return setToDate(e.target.value);},value:toDate,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return filterReset();},className:\"bg-pink-500 text-white font-semibold px-4 rounded shadow-lg h-10 w-3/4 lg:w-48 mx-auto lg:mx-12 my-8 \",children:\"Borrar Filtros\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"font-style: italic w-full flex lg:flex-row flex-col lg:px-6 my-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"border rounded-md w-24 h-12 \".concat(sharedTicket===\"shared\"?\"bg-pink-500 shadow-lg\":\"bg-gray-100\"),onClick:function onClick(){return setSharedTicket(\"shared\");},children:\" Familiar \"}),/*#__PURE__*/_jsx(\"button\",{className:\"border rounded-md w-24 h-12 \".concat(sharedTicket===\"personal\"?\"bg-pink-500 shadow-lg\":\"bg-gray-300\"),onClick:function onClick(){return setSharedTicket(\"personal\");},children:\" Personal \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:w-2/4 w-full\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-2xl text-center text-pink-500\",children:\"Gastos\"}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:filteredExpenses.map(function(filteredTicket){return/*#__PURE__*/_jsx(TicketCard,{data:filteredTicket},filteredTicket.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:w-2/4 w-full \",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-2xl text-center text-pink-500\",children:\"Ingresos\"}),listaTickets.filter(function(data){return data.type==='income'&&data.category===\"\".concat(sharedTicket)&&(fromDate&&toDate?data.date>=fromDate&&data.date<=toDate:data.date);}).map(function(filteredTicket){return/*#__PURE__*/_jsx(TicketCard,{data:filteredTicket},filteredTicket.id);})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(FinanceCard,{totalExpenses:totalExpenses,totalIncome:totalIncome,balance:balance})})]});};export default Dashboard;","map":{"version":3,"sources":["C:/Users/rodal/Desktop/ibarraHirasako/src/Pages/Dashboard/index.jsx"],"names":["useEffect","useState","useContext","onSnapshot","getCollectionRef","TicketCard","FinanceCard","userContext","Dashboard","listaTickets","setListaTickets","fromDate","setFromDate","toDate","setToDate","sharedTicket","setSharedTicket","user","unSubscribe","data","docs","map","doc","id","filteredExpenses","filter","type","category","uid","date","incomeTypeTicketsAmount","incomeTypeTickets","incomeTypeTicketsString","amount","forEach","str","push","Number","incomeSum","i","length","expenseTypeTicketsAmount","expenseTypeTickets","expenseTypeTicketsString","expenseSum","porcentajeComision","commission","result","totalExpenses","reduce","total","ticket","totalIncome","balance","filterReset","e","target","value","filteredTicket"],"mappings":"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","sourcesContent":["import { useEffect, useState, useContext } from \"react\";\r\nimport { onSnapshot } from \"firebase/firestore\";\r\nimport { getCollectionRef } from \"../../Services/CRUD\";\r\nimport TicketCard from \"../../Components/TicketCard\";\r\nimport FinanceCard from \"../../Components/FinanceCard\";\r\nimport { userContext } from \"../../context/userProvider\";\r\n\r\nconst Dashboard = () => {\r\n  const [listaTickets, setListaTickets] = useState([]);\r\n  const [fromDate, setFromDate] = useState(\"\");\r\n  const [toDate, setToDate] = useState(\"\");\r\n  const [sharedTicket, setSharedTicket] = useState(\"shared\"); // Corregido el nombre de la variable\r\n  const user = useContext(userContext)\r\n\r\n  useEffect(() => {\r\n    const unSubscribe = onSnapshot(getCollectionRef(\"tickets\"), (data) => {\r\n      setListaTickets(\r\n        data.docs.map((doc) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        })\r\n      );\r\n    });\r\n\r\n    return () => {\r\n      unSubscribe();\r\n    };\r\n  }, []);\r\n\r\n  // Obtener los tickets filtrados por los criterios seleccionados\r\n  const filteredExpenses = listaTickets.filter((data) => {\r\n    if (sharedTicket === \"personal\") {\r\n      // Mostrar solo los tickets del usuario actual (filtrar por uid)\r\n      return (\r\n        data.type === \"expense\" &&\r\n        data.category === sharedTicket &&\r\n        data.uid === user.uid\r\n      );\r\n    } else {\r\n      // Mostrar los tickets basados en el estado compartido y el rango de fechas\r\n      return (\r\n        data.type === \"expense\" &&\r\n        data.category === sharedTicket &&\r\n        (fromDate && toDate ? (data.date >= fromDate && data.date <= toDate) : data.date)\r\n      );\r\n    }\r\n  });\r\n  \r\n  // THIS PART WILL CHANGE INCOME TICKET AMOUNT ARRAY STRING TO INTERGER\r\n\r\n  const incomeTypeTicketsAmount = []\r\n\r\n  const incomeTypeTickets = listaTickets.filter(data => (data.type === 'income' && data.date >= fromDate && data.date <= toDate))\r\n  const incomeTypeTicketsString = incomeTypeTickets.map(data => data.amount)\r\n  \r\n  incomeTypeTicketsString.forEach( str=> {\r\n    incomeTypeTicketsAmount.push(Number(str))\r\n  })\r\n  let incomeSum = 0\r\n  for (let i = 0; i < incomeTypeTicketsAmount.length; i++) {\r\n    incomeSum += incomeTypeTicketsAmount[i];\r\n  }\r\n  \r\n    // THIS PART WILL CHANGE INCOME TICKET AMOUNT ARRAY STRING TO INTERGER\r\n\r\n    const expenseTypeTicketsAmount = []\r\n\r\n    const expenseTypeTickets = listaTickets.filter(data => (data.type === 'expense' && data.date >= fromDate && data.date <= toDate))\r\n    const expenseTypeTicketsString = expenseTypeTickets.map(data => data.amount)\r\n    \r\n    expenseTypeTicketsString.forEach( str=> {\r\n      expenseTypeTicketsAmount.push(Number(str))\r\n    })\r\n    let expenseSum = 0\r\n    for (let i = 0; i < expenseTypeTicketsAmount.length; i++) {\r\n      expenseSum += expenseTypeTicketsAmount[i];\r\n    }\r\n    \r\n  // THIS WILL GET THE COMISSION AND RESULT\r\n    const porcentajeComision = 0.10\r\n    const commission = incomeSum * porcentajeComision\r\n    const result = incomeSum - expenseSum - commission\r\n\r\n  \r\n    // Obtener la suma total de los gastos y los ingresos\r\n    const totalExpenses = filteredExpenses.reduce(\r\n      (total, ticket) => total + Number(ticket.amount),\r\n      0\r\n    );\r\n  \r\n    const totalIncome = listaTickets\r\n      .filter((data) => data.type === 'income' && data.category === sharedTicket && \r\n          (fromDate && toDate ? (data.date >= fromDate && data.date <= toDate) : data.date))\r\n      .reduce((total, ticket) => total + Number(ticket.amount), 0);\r\n  \r\n    const balance = totalIncome - totalExpenses;\r\n  \r\n    const filterReset = () => {\r\n      setFromDate(\"\");\r\n      setToDate(\"\");\r\n    };\r\n\r\n  return (\r\n    <div>\r\n          <div className=\"flex flex-col w-full lg:flex-row justify-evenly mt-0 bg-pink-300\">\r\n            <h2 className=\"text-center text-xl font-bold lg:text-xl my-auto\">Filtro por fechas</h2>\r\n            <div className=\"flex w-full lg:w-3/4  justify-around\">\r\n            <div className=\"flex flex-col justify-center\">\r\n                <label htmlFor=\"fromDate\" className=\"block text-gray-700 font-bold mb-2 text-2xl\">Desde</label>\r\n                                  <input \r\n                                  id=\"fromDate\"\r\n                                  name=\"fromDate\"\r\n                                  type=\"date\"\r\n                                  onChange={e => setFromDate(e.target.value)}\r\n                                  value={fromDate}\r\n                                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                                  />\r\n            </div>\r\n            <div className=\"flex flex-col justify-center\">\r\n                <label htmlFor=\"toDate\" className=\"block text-gray-700 font-bold mb-2 text-2xl\">Hasta</label>\r\n                                  <input \r\n                                  id=\"toDate\"\r\n                                  name=\"toDate\"\r\n                                  type=\"date\"\r\n                                  onChange={e => setToDate(e.target.value)}\r\n                                  value={toDate}\r\n                                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                                  />\r\n            </div>\r\n            </div>\r\n            <button onClick={() => filterReset()} className=\"bg-pink-500 text-white font-semibold px-4 rounded shadow-lg h-10 w-3/4 lg:w-48 mx-auto lg:mx-12 my-8 \">Borrar Filtros</button>\r\n            </div> \r\n\r\n      <div className=\"font-style: italic w-full flex lg:flex-row flex-col lg:px-6 my-4\">\r\n        <div className=\"mx-auto\">\r\n          <button className={`border rounded-md w-24 h-12 ${sharedTicket === \"shared\" ? \"bg-pink-500 shadow-lg\" : \"bg-gray-100\"}`} onClick={() => setSharedTicket(\"shared\")}> Familiar </button>\r\n          <button className={`border rounded-md w-24 h-12 ${sharedTicket === \"personal\" ? \"bg-pink-500 shadow-lg\" : \"bg-gray-300\"}`} onClick={() => setSharedTicket(\"personal\")}> Personal </button>\r\n        </div>\r\n        <div className=\"lg:w-2/4 w-full\">\r\n          <h1 className=\"font-bold text-2xl text-center text-pink-500\">Gastos</h1>\r\n          <div className=\"\">\r\n            {filteredExpenses.map((filteredTicket) => (\r\n              <TicketCard key={filteredTicket.id} data={filteredTicket} />\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"lg:w-2/4 w-full \">\r\n          <h1 className=\"font-bold text-2xl text-center text-pink-500\">Ingresos</h1>\r\n          {listaTickets\r\n            .filter((data) => data.type === 'income' && data.category === `${sharedTicket}` && \r\n                  (fromDate && toDate ? (data.date >= fromDate && data.date <= toDate) : data.date))\r\n            .map((filteredTicket) => (\r\n              <TicketCard key={filteredTicket.id} data={filteredTicket} />\r\n            ))}\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <FinanceCard\r\n          totalExpenses={totalExpenses}\r\n          totalIncome={totalIncome}\r\n          balance={balance}\r\n        />\r\n      </div>\r\n    </div>\r\n    )\r\n  }\r\n  \r\n  export default Dashboard"]},"metadata":{},"sourceType":"module"}