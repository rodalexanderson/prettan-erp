{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rodal\\\\Desktop\\\\ibarraHirasako\\\\src\\\\context\\\\userProvider.jsx\",\n    _s = $RefreshSig$();\n\nimport { onSnapshot } from \"firebase/firestore\";\nimport { createContext, useState, useEffect } from \"react\";\nimport { handleAuthChange } from \"../Services/authChange\";\nimport { getDocRef } from \"../Services/CRUD\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const userContext = /*#__PURE__*/createContext();\nexport const UserProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [user, setUser] = useState();\n\n  const suscribeToUser = user => onSnapshot(getDocRef(\"users\", user.uid), data => {\n    setUser({ ...user,\n      ...data.data()\n    });\n  });\n\n  useEffect(async () => {\n    let unsuscribeFromUser;\n    const unsuscribe = await handleAuthChange(user => {\n      if (user) {\n        unsuscribeFromUser = suscribeToUser(user);\n      } else {\n        setUser(null);\n        if (unsuscribeFromUser) unsuscribeFromUser();\n      }\n    });\n    return () => {\n      unsuscribe();\n      if (unsuscribeFromUser) unsuscribeFromUser();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(userContext.Provider, {\n    value: user,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UserProvider, \"hT6C72rcbfRUedrDq+TPaFfRI/M=\");\n\n_c = UserProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"sources":["C:/Users/rodal/Desktop/ibarraHirasako/src/context/userProvider.jsx"],"names":["onSnapshot","createContext","useState","useEffect","handleAuthChange","getDocRef","userContext","UserProvider","children","user","setUser","suscribeToUser","uid","data","unsuscribeFromUser","unsuscribe"],"mappings":";;;AAAA,SAASA,UAAT,QAA2B,oBAA3B;AACA,SAASC,aAAT,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,SAASC,gBAAT,QAAiC,wBAAjC;AACA,SAASC,SAAT,QAA0B,kBAA1B;;AAEA,OAAO,MAAMC,WAAW,gBAAGL,aAAa,EAAjC;AAGP,OAAO,MAAMM,YAAY,GAAG,QAAgB;AAAA;;AAAA,MAAf;AAACC,IAAAA;AAAD,GAAe;AACzC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,EAAhC;;AAEC,QAAMS,cAAc,GAAIF,IAAD,IAAUT,UAAU,CAACK,SAAS,CAAC,OAAD,EAAUI,IAAI,CAACG,GAAf,CAAV,EAAgCC,IAAD,IAAU;AAChFH,IAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAU,SAAGI,IAAI,CAACA,IAAL;AAAb,KAAD,CAAP;AACH,GAF0C,CAA3C;;AAKAV,EAAAA,SAAS,CAAE,YAAY;AACtB,QAAKW,kBAAL;AACD,UAAMC,UAAU,GAAG,MAAOX,gBAAgB,CAAIK,IAAD,IAAQ;AAC/C,UAAIA,IAAJ,EAAS;AACXK,QAAAA,kBAAkB,GAAGH,cAAc,CAACF,IAAD,CAAnC;AACC,OAFC,MAEK;AACNC,QAAAA,OAAO,CAAC,IAAD,CAAP;AACE,YAAII,kBAAJ,EAAwBA,kBAAkB;AAC5C;AACJ,KAPyC,CAA1C;AAQA,WAAO,MAAK;AACNC,MAAAA,UAAU;AACV,UAAID,kBAAJ,EAAwBA,kBAAkB;AAC/C,KAHD;AAIC,GAdQ,EAcN,EAdM,CAAT;AAgBA,sBACI,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEL,IAA7B;AAAA,cACKD;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH,CA7BM;;GAAMD,Y;;KAAAA,Y","sourcesContent":["import { onSnapshot } from \"firebase/firestore\";\r\nimport { createContext, useState, useEffect } from \"react\";\r\nimport { handleAuthChange } from \"../Services/authChange\";\r\nimport { getDocRef } from \"../Services/CRUD\";\r\n\r\nexport const userContext = createContext()\r\n\r\n\r\nexport const UserProvider = ({children}) => {\r\n   const [user, setUser] = useState();\r\n\r\n    const suscribeToUser = (user) => onSnapshot(getDocRef(\"users\", user.uid), (data) => {\r\n        setUser({...user, ...data.data()})\r\n    });\r\n\r\n\r\n    useEffect( async () => {\r\n     let  unsuscribeFromUser  \r\n    const unsuscribe = await  handleAuthChange ( (user)=>{\r\n          if (user){\r\n        unsuscribeFromUser = suscribeToUser(user)\r\n        } else {\r\n         setUser(null)\r\n           if (unsuscribeFromUser) unsuscribeFromUser()\r\n        }\r\n    });\r\n    return ()=> {\r\n          unsuscribe()\r\n          if (unsuscribeFromUser) unsuscribeFromUser()\r\n    };\r\n    }, []);\r\n\r\n    return (\r\n        <userContext.Provider value={user}>\r\n            {children}\r\n        </userContext.Provider>\r\n    )\r\n};"]},"metadata":{},"sourceType":"module"}