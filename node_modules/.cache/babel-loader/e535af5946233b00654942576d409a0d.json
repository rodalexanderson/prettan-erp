{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\rodal\\\\Desktop\\\\ibarraHirasako\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\defineProperty.js\";import _objectSpread from\"C:\\\\Users\\\\rodal\\\\Desktop\\\\ibarraHirasako\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _asyncToGenerator from\"C:\\\\Users\\\\rodal\\\\Desktop\\\\ibarraHirasako\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\rodal\\\\Desktop\\\\ibarraHirasako\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\rodal\\\\Desktop\\\\ibarraHirasako\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect,useContext}from\"react\";import{userContext}from\"../../context/userProvider\";import{addData,getDataById,updateData}from\"../../Services/CRUD\";import{useNavigate}from\"react-router-dom\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TicketPage=function TicketPage(_ref){var editMode=_ref.editMode;var user=useContext(userContext);var navigate=useNavigate();var _useState=useState({timestamp:new Date().toISOString()}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useParams=useParams(),id=_useParams.id;var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(editMode){_context.next=5;break;}_context.next=4;return addData(\"tickets\",{amount:formData.amount,type:formData.type,category:formData.category,concept:formData.concept,timestamp:formData.timestamp,date:formData.date,uid:user.uid});case 4:navigate('/');case 5:if(!editMode){_context.next=9;break;}_context.next=8;return updateData(\"tickets\",id,{amount:formData.amount,type:formData.type,category:formData.category,concept:formData.concept,timestamp:formData.timestamp,date:formData.date,uid:user.uid});case 8:navigate('/');case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var fetchData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getDataById(\"tickets\",id);case 2:response=_context2.sent;setFormData({amount:response.amount,type:response.type,category:response.category,concept:response.concept,timestamp:response.timestamp,date:response.date,uid:user.uid});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchData(){return _ref3.apply(this,arguments);};}();useEffect(function(){if(editMode)fetchData();},[]);var handleChange=function handleChange(e){var value=e.target.value;var name=e.target.name;setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-black text-center\",children:editMode?'Actualiza tu movimiento':'Crear un movimiento'}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"bg-white shadow-md rounded px-8 pt-6 pb-8 m-4 w-3/4\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"flex flex-col flex-wrap w-3/4 m-10\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"type\",className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"Tipo de Movimiento\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:formData.type,onChange:handleChange,required:true,defaultValue:'disable-value',className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",children:[/*#__PURE__*/_jsx(\"option\",{value:'disable-value',disabled:true,children:\" -- Selecciona una opcion -- \"}),/*#__PURE__*/_jsx(\"option\",{value:\"expense\",children:\"Gasto / Egreso\"}),/*#__PURE__*/_jsx(\"option\",{value:\"income\",children:\"Ingreso\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"Categoria\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",value:formData.category,onChange:handleChange,required:true,defaultValue:'disable-value',className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",children:[/*#__PURE__*/_jsx(\"option\",{value:'disable-value',disabled:true,children:\" -- Selecciona una opcion -- \"}),/*#__PURE__*/_jsx(\"option\",{value:\"shared\",children:\"Familia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"personal\",children:\"Personal\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"Monto\"}),/*#__PURE__*/_jsx(\"input\",{id:\"amount\",name:\"amount\",type:\"number\",onChange:handleChange,required:true,value:formData.amount,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"concept\",className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"Concepto\"}),/*#__PURE__*/_jsx(\"input\",{id:\"concept\",name:\"concept\",type:\"text\",onChange:handleChange,required:true,value:formData.concept,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"Fecha\"}),/*#__PURE__*/_jsx(\"input\",{id:\"date\",name:\"date\",type:\"date\",onChange:handleChange,required:true,value:formData.date,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"}),/*#__PURE__*/_jsx(\"input\",{value:\"Enviar\",type:\"submit\",className:\"bg-yellow-400 hover:bg-yellow-500 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline cursor-pointer mt-9\"})]})})})]});};export default TicketPage;","map":{"version":3,"sources":["C:/Users/rodal/Desktop/ibarraHirasako/src/Pages/TicketPage/index.jsx"],"names":["useState","useEffect","useContext","userContext","addData","getDataById","updateData","useNavigate","useParams","TicketPage","editMode","user","navigate","timestamp","Date","toISOString","formData","setFormData","id","handleSubmit","e","preventDefault","amount","type","category","concept","date","uid","fetchData","response","handleChange","value","target","name","prevState"],"mappings":"4pBAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,UAA9B,KAA+C,OAA/C,CACA,OAASC,WAAT,KAA4B,4BAA5B,CACA,OAASC,OAAT,CAAkBC,WAAlB,CAA+BC,UAA/B,KAAiD,qBAAjD,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,SAAT,KAA0B,kBAA1B,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,CAC/B,GAAMC,CAAAA,IAAI,CAAGT,UAAU,CAACC,WAAD,CAAvB,CACA,GAAMS,CAAAA,QAAQ,CAAGL,WAAW,EAA5B,CACA,cAAgCP,QAAQ,CAAC,CACrCa,SAAS,CAAE,GAAIC,CAAAA,IAAJ,GAAWC,WAAX,EAD0B,CAAD,CAAxC,wCAAOC,QAAP,eAAiBC,WAAjB,eAGA,eAAWT,SAAS,EAApB,CAAKU,EAAL,YAAKA,EAAL,CAGA,GAAMC,CAAAA,YAAY,2FAAG,iBAAOC,CAAP,kHACjBA,CAAC,CAACC,cAAF,GADiB,GAEbX,QAFa,+CAGPN,CAAAA,OAAO,CAAC,SAAD,CAAY,CACrBkB,MAAM,CAAEN,QAAQ,CAACM,MADI,CAErBC,IAAI,CAAEP,QAAQ,CAACO,IAFM,CAGrBC,QAAQ,CAAER,QAAQ,CAACQ,QAHE,CAIrBC,OAAO,CAAET,QAAQ,CAACS,OAJG,CAKrBZ,SAAS,CAAEG,QAAQ,CAACH,SALC,CAMrBa,IAAI,CAAEV,QAAQ,CAACU,IANM,CAOrBC,GAAG,CAAEhB,IAAI,CAACgB,GAPW,CAAZ,CAHA,QAYbf,QAAQ,CAAC,GAAD,CAAR,CAZa,WAcbF,QAda,+CAePJ,CAAAA,UAAU,CAAC,SAAD,CAAYY,EAAZ,CAAgB,CAC5BI,MAAM,CAAEN,QAAQ,CAACM,MADW,CAE5BC,IAAI,CAAEP,QAAQ,CAACO,IAFa,CAG5BC,QAAQ,CAAER,QAAQ,CAACQ,QAHS,CAI5BC,OAAO,CAAET,QAAQ,CAACS,OAJU,CAK5BZ,SAAS,CAAEG,QAAQ,CAACH,SALQ,CAM5Ba,IAAI,CAAEV,QAAQ,CAACU,IANa,CAO5BC,GAAG,CAAEhB,IAAI,CAACgB,GAPkB,CAAhB,CAfH,QAwBbf,QAAQ,CAAC,GAAD,CAAR,CAxBa,sDAAH,kBAAZO,CAAAA,YAAY,6CAAlB,CA4BA,GAAMS,CAAAA,SAAS,2FAAG,4KACSvB,CAAAA,WAAW,CAAC,SAAD,CAAYa,EAAZ,CADpB,QACTW,QADS,gBAEdZ,WAAW,CAAC,CACRK,MAAM,CAAEO,QAAQ,CAACP,MADT,CAERC,IAAI,CAAEM,QAAQ,CAACN,IAFP,CAGRC,QAAQ,CAAEK,QAAQ,CAACL,QAHX,CAIRC,OAAO,CAAEI,QAAQ,CAACJ,OAJV,CAKRZ,SAAS,CAAEgB,QAAQ,CAAChB,SALZ,CAMRa,IAAI,CAAEG,QAAQ,CAACH,IANP,CAORC,GAAG,CAAEhB,IAAI,CAACgB,GAPF,CAAD,CAAX,CAFc,wDAAH,kBAATC,CAAAA,SAAS,2CAAf,CAaA3B,SAAS,CAAC,UAAM,CACZ,GAAGS,QAAH,CAAakB,SAAS,GACzB,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACV,CAAD,CAAO,CACxB,GAAMW,CAAAA,KAAK,CAAGX,CAAC,CAACY,MAAF,CAASD,KAAvB,CACA,GAAME,CAAAA,IAAI,CAAGb,CAAC,CAACY,MAAF,CAASC,IAAtB,CAEAhB,WAAW,CAAC,SAACiB,SAAD,wCACLA,SADK,wBAEPD,IAFO,CAEAF,KAFA,IAAD,CAAX,CAKH,CATD,CAUA,mBACI,aAAK,SAAS,CAAC,eAAf,wBACI,WAAI,SAAS,CAAC,wBAAd,UAAwCrB,QAAQ,CAAG,yBAAH,CAA+B,qBAA/E,EADJ,cAEI,YAAK,SAAS,CAAC,eAAf,uBACI,aAAM,QAAQ,CAAES,YAAhB,CAA8B,SAAS,CAAC,qDAAxC,uBACI,iBAAS,SAAS,CAAC,oCAAnB,wBACE,cAAO,OAAO,CAAC,MAAf,CAAqB,SAAS,CAAC,4CAA/B,gCADF,cAEQ,gBACI,IAAI,CAAC,MADT,CAEI,KAAK,CAAEH,QAAQ,CAACO,IAFpB,CAGI,QAAQ,CAAEO,YAHd,CAII,QAAQ,CAAE,IAJd,CAKI,YAAY,CAAE,eALlB,CAMI,SAAS,CAAC,4HANd,wBAQI,eAAQ,KAAK,CAAE,eAAf,CAAgC,QAAQ,KAAxC,2CARJ,cASI,eAAQ,KAAK,CAAC,SAAd,4BATJ,cAUI,eAAQ,KAAK,CAAC,QAAd,qBAVJ,GAFR,cAcQ,cAAO,OAAO,CAAC,UAAf,CAAyB,SAAS,CAAC,4CAAnC,uBAdR,cAeQ,gBACI,IAAI,CAAC,UADT,CAEI,KAAK,CAAEd,QAAQ,CAACQ,QAFpB,CAGI,QAAQ,CAAEM,YAHd,CAII,QAAQ,CAAE,IAJd,CAKI,YAAY,CAAE,eALlB,CAMI,SAAS,CAAC,4HANd,wBAQI,eAAQ,KAAK,CAAE,eAAf,CAAgC,QAAQ,KAAxC,2CARJ,cASI,eAAQ,KAAK,CAAC,QAAd,qBATJ,cAUI,eAAQ,KAAK,CAAC,UAAd,sBAVJ,GAfR,cA2BQ,cAAO,OAAO,CAAC,QAAf,CAAwB,SAAS,CAAC,4CAAlC,mBA3BR,cA4BQ,cACA,EAAE,CAAC,QADH,CAEA,IAAI,CAAC,QAFL,CAGA,IAAI,CAAC,QAHL,CAIA,QAAQ,CAAEA,YAJV,CAKA,QAAQ,CAAE,IALV,CAMA,KAAK,CAAEd,QAAQ,CAACM,MANhB,CAOA,SAAS,CAAC,4HAPV,EA5BR,cAqCQ,cAAO,OAAO,CAAC,SAAf,CAAyB,SAAS,CAAC,4CAAnC,sBArCR,cAsCQ,cACA,EAAE,CAAC,SADH,CAEA,IAAI,CAAC,SAFL,CAGA,IAAI,CAAC,MAHL,CAIA,QAAQ,CAAEQ,YAJV,CAKA,QAAQ,CAAE,IALV,CAMA,KAAK,CAAEd,QAAQ,CAACS,OANhB,CAOA,SAAS,CAAC,4HAPV,EAtCR,cA+CQ,cAAO,OAAO,CAAC,MAAf,CAAsB,SAAS,CAAC,4CAAhC,mBA/CR,cAgDQ,cACA,EAAE,CAAC,MADH,CAEA,IAAI,CAAC,MAFL,CAGA,IAAI,CAAC,MAHL,CAIA,QAAQ,CAAEK,YAJV,CAKA,QAAQ,CAAE,IALV,CAMA,KAAK,CAAEd,QAAQ,CAACU,IANhB,CAOA,SAAS,CAAC,4HAPV,EAhDR,cAyDI,cAAO,KAAK,CAAC,QAAb,CAAsB,IAAI,CAAC,QAA3B,CAAoC,SAAS,CAAC,sIAA9C,EAzDJ,GADJ,EADJ,EAFJ,GADJ,CAqEH,CArID,CAsIA,cAAejB,CAAAA,UAAf","sourcesContent":["import { useState, useEffect, useContext} from \"react\"\r\nimport { userContext } from \"../../context/userProvider\"\r\nimport { addData, getDataById, updateData } from \"../../Services/CRUD\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { useParams } from \"react-router-dom\"\r\n\r\nconst TicketPage = ({editMode}) => {\r\n    const user = useContext(userContext)\r\n    const navigate = useNavigate()\r\n    const [formData, setFormData] = useState({\r\n        timestamp: new Date().toISOString()\r\n    })\r\n    let {id} = useParams()\r\n    \r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        if(!editMode){\r\n            await addData(\"tickets\", {\r\n                amount: formData.amount,\r\n                type: formData.type,\r\n                category: formData.category,\r\n                concept: formData.concept,\r\n                timestamp: formData.timestamp,\r\n                date: formData.date,\r\n                uid: user.uid,\r\n            })\r\n            navigate('/')\r\n        }\r\n        if (editMode){\r\n            await updateData(\"tickets\", id, {\r\n                amount: formData.amount,\r\n                type: formData.type,\r\n                category: formData.category,\r\n                concept: formData.concept,\r\n                timestamp: formData.timestamp,\r\n                date: formData.date,\r\n                uid: user.uid,\r\n            })\r\n            navigate('/')\r\n        }\r\n    }\r\n\r\n    const fetchData = async () => {\r\n       const response =  await getDataById(\"tickets\", id)\r\n        setFormData({\r\n            amount: response.amount,\r\n            type: response.type,\r\n            category: response.category,\r\n            concept: response.concept,\r\n            timestamp: response.timestamp,\r\n            date: response.date,\r\n            uid: user.uid\r\n            })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(editMode) fetchData()\r\n    }, [])\r\n\r\n    const handleChange = (e) => {\r\n        const value = e.target.value\r\n        const name = e.target.name\r\n\r\n        setFormData((prevState) => ({\r\n            ...prevState,\r\n            [name]: value\r\n        })\r\n        )\r\n    }\r\n    return (\r\n        <div className=\"flex flex-col\">\r\n            <h1 className=\"text-black text-center\">{editMode ? 'Actualiza tu movimiento' : 'Crear un movimiento'}</h1>\r\n            <div className=\"flex flex-col\">\r\n                <form onSubmit={handleSubmit} className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 m-4 w-3/4\">\r\n                    <section className=\"flex flex-col flex-wrap w-3/4 m-10\">\r\n                      <label htmlFor=\"type\"className=\"block text-gray-700 text-sm font-bold mb-2\">Tipo de Movimiento</label>\r\n                            <select \r\n                                name=\"type\"\r\n                                value={formData.type}\r\n                                onChange={handleChange}\r\n                                required={true}\r\n                                defaultValue={'disable-value'}\r\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                                >\r\n                                <option value={'disable-value'} disabled> -- Selecciona una opcion -- </option>\r\n                                <option value=\"expense\">Gasto / Egreso</option>\r\n                                <option value=\"income\" >Ingreso</option>\r\n                            </select>\r\n                            <label htmlFor=\"category\"className=\"block text-gray-700 text-sm font-bold mb-2\">Categoria</label>\r\n                            <select \r\n                                name=\"category\"\r\n                                value={formData.category}\r\n                                onChange={handleChange}\r\n                                required={true}\r\n                                defaultValue={'disable-value'}\r\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                                >\r\n                                <option value={'disable-value'} disabled> -- Selecciona una opcion -- </option>\r\n                                <option value=\"shared\">Familia</option>\r\n                                <option value=\"personal\" >Personal</option>\r\n                            </select>\r\n                            <label htmlFor=\"amount\" className=\"block text-gray-700 text-sm font-bold mb-2\">Monto</label>\r\n                            <input \r\n                            id=\"amount\"\r\n                            name=\"amount\"\r\n                            type=\"number\"\r\n                            onChange={handleChange}\r\n                            required={true}\r\n                            value={formData.amount}\r\n                            className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                            />\r\n                            <label htmlFor=\"concept\" className=\"block text-gray-700 text-sm font-bold mb-2\">Concepto</label>\r\n                            <input \r\n                            id=\"concept\"\r\n                            name=\"concept\"\r\n                            type=\"text\"\r\n                            onChange={handleChange}\r\n                            required={true}\r\n                            value={formData.concept}\r\n                            className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                            />\r\n                            <label htmlFor=\"date\" className=\"block text-gray-700 text-sm font-bold mb-2\">Fecha</label>\r\n                            <input \r\n                            id=\"date\"\r\n                            name=\"date\"\r\n                            type=\"date\"\r\n                            onChange={handleChange}\r\n                            required={true}\r\n                            value={formData.date}\r\n                            className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                            />\r\n                        <input value=\"Enviar\" type=\"submit\" className=\"bg-yellow-400 hover:bg-yellow-500 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline cursor-pointer mt-9\" />\r\n                    </section>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n    \r\n}\r\nexport default TicketPage"]},"metadata":{},"sourceType":"module"}